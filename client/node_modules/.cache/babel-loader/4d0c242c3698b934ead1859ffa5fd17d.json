{"ast":null,"code":"import _objectSpread from \"D:\\\\Paste Work\\\\nurse\\\\nurse\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"D:\\\\Paste Work\\\\nurse\\\\nurse\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"D:\\\\Paste Work\\\\nurse\\\\nurse\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\Paste Work\\\\nurse\\\\nurse\\\\client\\\\src\\\\app\\\\pages\\\\home\\\\History\\\\HistoryDetail.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport clsx from 'clsx';\nimport { useHistory } from \"react-router-dom\";\nimport * as actions from '../../../../app/actions';\nimport * as authDuck from '../../../../app/store/ducks/auth.duck';\nimport * as activityDuck from '../../../../app/store/ducks/activity.duck';\nimport * as historyDuck from '../../../../app/store/ducks/history.duck';\nimport * as categoryDuck from '../../../../app/store/ducks/category.duck';\nimport { storage } from './../../../../app/firebase';\nimport default_img from './../../../assets/default_profile.png';\nimport { Link } from \"react-router-dom\";\n\nfunction HistoryDetail(props) {\n  var _React$createElement,\n      _this = this;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      id = _useState4[0],\n      setId = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      title = _useState6[0],\n      setTitle = _useState6[1];\n\n  var _useState7 = useState(10),\n      _useState8 = _slicedToArray(_useState7, 2),\n      min = _useState8[0],\n      setMin = _useState8[1];\n\n  var _useState9 = useState(100),\n      _useState10 = _slicedToArray(_useState9, 2),\n      max = _useState10[0],\n      setMax = _useState10[1];\n\n  var _useState11 = useState(''),\n      _useState12 = _slicedToArray(_useState11, 2),\n      category = _useState12[0],\n      setCategory = _useState12[1];\n\n  var _useState13 = useState(''),\n      _useState14 = _slicedToArray(_useState13, 2),\n      summary = _useState14[0],\n      setSummary = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      categoryarr = _useState16[0],\n      setCategoryarr = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      loading = _useState18[0],\n      setLoading = _useState18[1];\n\n  var _useState19 = useState({\n    paddingRight: \"2.5rem\"\n  }),\n      _useState20 = _slicedToArray(_useState19, 2),\n      loadingButtonStyle = _useState20[0],\n      setLoadingButtonStyle = _useState20[1];\n\n  var history = useHistory();\n\n  var enableLoading = function enableLoading() {\n    setLoading(true);\n    setLoadingButtonStyle({\n      paddingRight: \"3.5rem\"\n    });\n  };\n\n  var disableLoading = function disableLoading() {\n    setLoading(false);\n    setLoadingButtonStyle({\n      paddingRight: \"2.5rem\"\n    });\n  };\n\n  useEffect(function () {\n    console.log('props.cursur');\n    console.log(props.curhistory);\n    setId(props.curhistory._id || '');\n    setTitle(props.curhistory.title || '');\n    setMin(props.curhistory.minBudget || 1);\n    setMax(props.curhistory.maxBudget || 10);\n    setSummary(props.curhistory.summary || '');\n    setCategoryarr(props.allcategories);\n    if (props.curhistory.category) setCategory(props.curhistory.category || '');else setCategory(props.allcategories[0]._id);\n  }, [props]); // const cancel = () => {\n  // setPassword(getPassword(props.user.password));\n  // }\n\n  var save = function save() {\n    if (title === '' || summary === '') {\n      setStatus('You have to input all the correctly info');\n      return;\n    }\n\n    if (id === '') {\n      setStatus('You have to input all the correctly info');\n      return;\n    }\n\n    var tempData = {\n      title: title,\n      minBudget: min,\n      maxBudget: max,\n      summary: summary\n    };\n    if (id != '') Object.assign(tempData, {\n      '_id': id\n    });\n    handleSave(tempData);\n  };\n\n  var handleSave = function handleSave(result) {\n    enableLoading();\n    setTimeout(function () {\n      if (id === '') {\n        actions.addHistory(result).then(function (res) {\n          disableLoading();\n          var data = res.data;\n\n          if (!data.success) {\n            setStatus(data.errMessage);\n            return;\n          } else {\n            setStatus('');\n            console.log('succesfull');\n            props.allHistorys(data.historys);\n            history.push(\"/admin/history\");\n            return;\n          }\n        }).catch(function () {\n          //console.log('===  data2  == ')\n          disableLoading();\n          setStatus('Error!!! you have to check your Database or Connection');\n        });\n      } else {\n        actions.updateHistory(result).then(function (res) {\n          disableLoading();\n          var data = res.data;\n\n          if (!data.success) {\n            setStatus(data.errMessage);\n            return;\n          } else {\n            console.log('succesfull');\n            props.allHistorys(data.historys);\n            history.push(\"/admin/history\");\n            return;\n          }\n        }).catch(function () {\n          //console.log('===  data2  == ')\n          disableLoading();\n          setStatus('Error!!! you have to check your Database or Connection');\n        });\n      }\n    }, 1000);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    style: {\n      backgroundColor: \"white\",\n      padding: \"40px 20px 40px 20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"col-md-6 cold-sm-12\",\n    style: {\n      fontSize: \"1.275rem\",\n      fontWeight: 600\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 11\n    }\n  }, id === '' ? 'New' : 'Edit', \" History\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 col-sm-12 pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/history\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-secondary pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 39\n    }\n  }, \"Cancel\")), /*#__PURE__*/React.createElement(\"button\", (_React$createElement = {\n    className: \"\",\n    style: {\n      marginRight: 10\n    },\n    onClick: save\n  }, _defineProperty(_React$createElement, \"className\", \"btn btn-primary pull-right \".concat(clsx({\n    \"kt-spinner kt-spinner--right kt-spinner--md kt-spinner--light\": loading\n  }))), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 13\n  }), _React$createElement), id === '' ? 'Add' : 'Update'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12\",\n    style: {\n      marginTop: 60\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-xl-3 col-lg-3 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }, \"History Title\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-9 col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    type: \"text\",\n    value: title,\n    onChange: function onChange(e) {\n      return setTitle(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-xl-3 col-lg-3 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-9 col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"select\", {\n    className: \"form-control\",\n    id: \"exampleSelectl\",\n    value: category,\n    onChange: function onChange(e) {\n      return setCategory(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, categoryarr.map(function (row, index) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: row._id,\n      value: row._id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }\n    }, row.name);\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-xl-3 col-lg-3 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, \"History Summary\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-9 col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control\",\n    rows: \"4\",\n    value: summary,\n    onChange: function onChange(e) {\n      return setSummary(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group  row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-xl-3 col-lg-3 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, \"Min Budget\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-9 col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    min: \"1\",\n    value: min,\n    onChange: function onChange(e) {\n      return setMin(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-append\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 57\n    }\n  }, \"$\"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group  row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"col-xl-3 col-lg-3 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  }, \"Max Budget\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-9 col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    min: \"10\",\n    value: max,\n    onChange: function onChange(e) {\n      return setMax(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-group-append\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"input-group-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 57\n    }\n  }, \"$\"))))))));\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    allcategories: state.category.allcategories,\n    curhistory: state.history.curhistory\n  };\n};\n\nexport default connect(mapStateToProps, _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, authDuck.actions), activityDuck.actions), historyDuck.actions), categoryDuck.actions))(HistoryDetail);","map":{"version":3,"sources":["D:/Paste Work/nurse/nurse/client/src/app/pages/home/History/HistoryDetail.js"],"names":["React","useState","useEffect","connect","clsx","useHistory","actions","authDuck","activityDuck","historyDuck","categoryDuck","storage","default_img","Link","HistoryDetail","props","status","setStatus","id","setId","title","setTitle","min","setMin","max","setMax","category","setCategory","summary","setSummary","categoryarr","setCategoryarr","loading","setLoading","paddingRight","loadingButtonStyle","setLoadingButtonStyle","history","enableLoading","disableLoading","console","log","curhistory","_id","minBudget","maxBudget","allcategories","save","tempData","Object","assign","handleSave","result","setTimeout","addHistory","then","res","data","success","errMessage","allHistorys","historys","push","catch","updateHistory","backgroundColor","padding","fontSize","fontWeight","marginRight","marginTop","e","target","value","map","row","index","name","mapStateToProps","state"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,SAASC,UAAT,QAA2B,kBAA3B;AACA,OAAO,KAAKC,OAAZ,MAAyB,yBAAzB;AACA,OAAO,KAAKC,QAAZ,MAA0B,uCAA1B;AACA,OAAO,KAAKC,YAAZ,MAA8B,2CAA9B;AACA,OAAO,KAAKC,WAAZ,MAA6B,0CAA7B;AACA,OAAO,KAAKC,YAAZ,MAA8B,2CAA9B;AAEA,SAAQC,OAAR,QAAsB,4BAAtB;AACA,OAAOC,WAAP,MAAwB,uCAAxB;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAEA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;AAAA;;AAAA,kBACAd,QAAQ,CAAC,EAAD,CADR;AAAA;AAAA,MACrBe,MADqB;AAAA,MACbC,SADa;;AAAA,mBAERhB,QAAQ,CAAC,EAAD,CAFA;AAAA;AAAA,MAErBiB,EAFqB;AAAA,MAEjBC,KAFiB;;AAAA,mBAGFlB,QAAQ,CAAC,EAAD,CAHN;AAAA;AAAA,MAGrBmB,KAHqB;AAAA,MAGdC,QAHc;;AAAA,mBAINpB,QAAQ,CAAC,EAAD,CAJF;AAAA;AAAA,MAIrBqB,GAJqB;AAAA,MAIhBC,MAJgB;;AAAA,mBAKNtB,QAAQ,CAAC,GAAD,CALF;AAAA;AAAA,MAKrBuB,GALqB;AAAA,MAKhBC,MALgB;;AAAA,oBAMIxB,QAAQ,CAAC,EAAD,CANZ;AAAA;AAAA,MAMrByB,QANqB;AAAA,MAMXC,WANW;;AAAA,oBAOE1B,QAAQ,CAAC,EAAD,CAPV;AAAA;AAAA,MAOrB2B,OAPqB;AAAA,MAOZC,UAPY;;AAAA,oBAQQ5B,QAAQ,CAAC,EAAD,CARhB;AAAA;AAAA,MAQrB6B,WARqB;AAAA,MAQRC,cARQ;;AAAA,oBASE9B,QAAQ,CAAC,KAAD,CATV;AAAA;AAAA,MASrB+B,OATqB;AAAA,MASZC,UATY;;AAAA,oBAUwBhC,QAAQ,CAAC;AAC3DiC,IAAAA,YAAY,EAAE;AAD6C,GAAD,CAVhC;AAAA;AAAA,MAUrBC,kBAVqB;AAAA,MAUDC,qBAVC;;AAa5B,MAAMC,OAAO,GAAGhC,UAAU,EAA1B;;AACC,MAAMiC,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC3BL,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAG,IAAAA,qBAAqB,CAAC;AAAEF,MAAAA,YAAY,EAAE;AAAhB,KAAD,CAArB;AACD,GAHA;;AAKD,MAAMK,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3BN,IAAAA,UAAU,CAAC,KAAD,CAAV;AACAG,IAAAA,qBAAqB,CAAC;AAAEF,MAAAA,YAAY,EAAE;AAAhB,KAAD,CAArB;AACD,GAHD;;AAIAhC,EAAAA,SAAS,CAAC,YAAM;AACdsC,IAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,IAAAA,OAAO,CAACC,GAAR,CAAY1B,KAAK,CAAC2B,UAAlB;AACAvB,IAAAA,KAAK,CAACJ,KAAK,CAAC2B,UAAN,CAAiBC,GAAjB,IAAwB,EAAzB,CAAL;AACAtB,IAAAA,QAAQ,CAACN,KAAK,CAAC2B,UAAN,CAAiBtB,KAAjB,IAA0B,EAA3B,CAAR;AACAG,IAAAA,MAAM,CAACR,KAAK,CAAC2B,UAAN,CAAiBE,SAAjB,IAA8B,CAA/B,CAAN;AACAnB,IAAAA,MAAM,CAACV,KAAK,CAAC2B,UAAN,CAAiBG,SAAjB,IAA8B,EAA/B,CAAN;AACAhB,IAAAA,UAAU,CAACd,KAAK,CAAC2B,UAAN,CAAiBd,OAAjB,IAA4B,EAA7B,CAAV;AACAG,IAAAA,cAAc,CAAChB,KAAK,CAAC+B,aAAP,CAAd;AACA,QAAG/B,KAAK,CAAC2B,UAAN,CAAiBhB,QAApB,EACEC,WAAW,CAACZ,KAAK,CAAC2B,UAAN,CAAiBhB,QAAjB,IAA6B,EAA9B,CAAX,CADF,KAGEC,WAAW,CAACZ,KAAK,CAAC+B,aAAN,CAAoB,CAApB,EAAuBH,GAAxB,CAAX;AACH,GAbQ,EAaN,CAAC5B,KAAD,CAbM,CAAT,CAvB4B,CAuC5B;AAEE;AACF;;AAEA,MAAMgC,IAAI,GAAG,SAAPA,IAAO,GAAM;AAChB,QAAG3B,KAAK,KAAK,EAAV,IAAgBQ,OAAO,KAAK,EAA/B,EAAkC;AACjCX,MAAAA,SAAS,CAAC,0CAAD,CAAT;AACA;AACD;;AACD,QAAGC,EAAE,KAAI,EAAT,EAAY;AACVD,MAAAA,SAAS,CAAC,0CAAD,CAAT;AACA;AACD;;AACD,QAAI+B,QAAQ,GAAG;AACb5B,MAAAA,KAAK,EAAEA,KADM;AAEbwB,MAAAA,SAAS,EAACtB,GAFG;AAGbuB,MAAAA,SAAS,EAACrB,GAHG;AAIbI,MAAAA,OAAO,EAACA;AAJK,KAAf;AAMA,QAAGV,EAAE,IAAI,EAAT,EACE+B,MAAM,CAACC,MAAP,CAAcF,QAAd,EAAwB;AAAC,aAAM9B;AAAP,KAAxB;AACAiC,IAAAA,UAAU,CAACH,QAAD,CAAV;AACH,GAlBD;;AAmBA,MAAMG,UAAU,GAAC,SAAXA,UAAW,CAACC,MAAD,EAAU;AAExBd,IAAAA,aAAa;AACde,IAAAA,UAAU,CAAC,YAAM;AACd,UAAGnC,EAAE,KAAK,EAAV,EAAa;AACdZ,QAAAA,OAAO,CAACgD,UAAR,CAAmBF,MAAnB,EAA2BG,IAA3B,CAAgC,UAAAC,GAAG,EAAE;AACnCjB,UAAAA,cAAc;AADqB,cAE9BkB,IAF8B,GAEtBD,GAFsB,CAE9BC,IAF8B;;AAGnC,cAAG,CAACA,IAAI,CAACC,OAAT,EAAiB;AACfzC,YAAAA,SAAS,CAACwC,IAAI,CAACE,UAAN,CAAT;AACA;AACD,WAHD,MAGK;AACH1C,YAAAA,SAAS,CAAC,EAAD,CAAT;AACAuB,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA1B,YAAAA,KAAK,CAAC6C,WAAN,CAAkBH,IAAI,CAACI,QAAvB;AACAxB,YAAAA,OAAO,CAACyB,IAAR,CAAa,gBAAb;AACA;AACD;AACF,SAbD,EAaGC,KAbH,CAaS,YAAM;AACb;AACAxB,UAAAA,cAAc;AACdtB,UAAAA,SAAS,CACP,wDADO,CAAT;AAGD,SAnBD;AAoBD,OArBE,MAqBE;AACHX,QAAAA,OAAO,CAAC0D,aAAR,CAAsBZ,MAAtB,EAA8BG,IAA9B,CAAmC,UAAAC,GAAG,EAAE;AACtCjB,UAAAA,cAAc;AADwB,cAEjCkB,IAFiC,GAEzBD,GAFyB,CAEjCC,IAFiC;;AAGtC,cAAG,CAACA,IAAI,CAACC,OAAT,EAAiB;AACfzC,YAAAA,SAAS,CAACwC,IAAI,CAACE,UAAN,CAAT;AACA;AACD,WAHD,MAGK;AACHnB,YAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ;AACA1B,YAAAA,KAAK,CAAC6C,WAAN,CAAkBH,IAAI,CAACI,QAAvB;AACAxB,YAAAA,OAAO,CAACyB,IAAR,CAAa,gBAAb;AACA;AACD;AACF,SAZD,EAYGC,KAZH,CAYS,YAAM;AACb;AACAxB,UAAAA,cAAc;AACdtB,UAAAA,SAAS,CACP,wDADO,CAAT;AAGD,SAlBD;AAmBD;AACA,KA3CS,EA2CP,IA3CO,CAAV;AA8CD,GAjDD;;AAmDA,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAqB,IAAA,KAAK,EAAE;AAACgD,MAAAA,eAAe,EAAE,OAAlB;AAA2BC,MAAAA,OAAO,EAAE;AAApC,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAGE;AAAK,IAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,qBAAhB;AAAsC,IAAA,KAAK,EAAE;AAACC,MAAAA,QAAQ,EAAE,UAAX;AAAuBC,MAAAA,UAAU,EAAE;AAAnC,KAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwFlD,EAAE,KAAG,EAAL,GAAQ,KAAR,GAAc,MAAtG,aADF,eAEE;AAAK,IAAA,SAAS,EAAC,+BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,EAAE,EAAC,gBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA0B;AAAQ,IAAA,SAAS,EAAC,8BAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAA1B,CADF,eAEE;AAAQ,IAAA,SAAS,EAAC,EAAlB;AAAqB,IAAA,KAAK,EAAE;AAACmD,MAAAA,WAAW,EAAE;AAAd,KAA5B;AAAiD,IAAA,OAAO,EAAEtB;AAA1D,6FAAwG3C,IAAI,CAClG;AACE,qEAAiE4B;AADnE,GADkG,CAA5G;AAAA;AAAA;AAAA;AAAA,6BAKWd,EAAE,KAAG,EAAL,GAAQ,KAAR,GAAc,QALzB,CAFF,CAFF,CADF,eAcE;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,KAAK,EAAE;AAACoD,MAAAA,SAAS,EAAE;AAAZ,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,SAAS,EAAC,kCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,SAAS,EAAC,cAAjB;AAAgC,IAAA,IAAI,EAAC,MAArC;AAA4C,IAAA,KAAK,EAAElD,KAAnD;AAA0D,IAAA,QAAQ,EAAG,kBAACmD,CAAD;AAAA,aAAOlD,QAAQ,CAACkD,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf;AAAA,KAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CADF,eAOE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,kCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE;AAAQ,IAAA,SAAS,EAAC,cAAlB;AAAiC,IAAA,EAAE,EAAC,gBAApC;AAAqD,IAAA,KAAK,EAAE/C,QAA5D;AAAsE,IAAA,QAAQ,EAAG,kBAAC6C,CAAD;AAAA,aAAO5C,WAAW,CAAC4C,CAAC,CAACC,MAAF,CAASC,KAAV,CAAlB;AAAA,KAAjF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG3C,WAAW,CAAC4C,GAAZ,CAAgB,UAACC,GAAD,EAAKC,KAAL;AAAA,wBACf;AAAQ,MAAA,GAAG,EAAED,GAAG,CAAChC,GAAjB;AAAsB,MAAA,KAAK,EAAEgC,GAAG,CAAChC,GAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuCgC,GAAG,CAACE,IAA3C,CADe;AAAA,GAAhB,CADH,CAFF,CAFJ,CAPF,eAkBI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,SAAS,EAAC,kCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADF,eAEE;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAU,IAAA,SAAS,EAAC,cAApB;AAAoC,IAAA,IAAI,EAAC,GAAzC;AAA4C,IAAA,KAAK,EAAEjD,OAAnD;AAA4D,IAAA,QAAQ,EAAG,kBAAC2C,CAAD;AAAA,aAAO1C,UAAU,CAAC0C,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB;AAAA,KAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CAlBJ,eAwBI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,kCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,SAAS,EAAC,cAA/B;AAA8C,IAAA,GAAG,EAAC,GAAlD;AAAsD,IAAA,KAAK,EAAEnD,GAA7D;AAAkE,IAAA,QAAQ,EAAG,kBAACiD,CAAD;AAAA,aAAOhD,MAAM,CAACgD,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb;AAAA,KAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAoC;AAAM,IAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAApC,CAFF,CADF,CAFJ,CAxBJ,eAiCI;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAO,IAAA,SAAS,EAAC,kCAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAK,IAAA,SAAS,EAAC,mBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,SAAS,EAAC,cAA/B;AAA8C,IAAA,GAAG,EAAC,IAAlD;AAAuD,IAAA,KAAK,EAAEjD,GAA9D;AAAmE,IAAA,QAAQ,EAAG,kBAAC+C,CAAD;AAAA,aAAO9C,MAAM,CAAC8C,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb;AAAA,KAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAoC;AAAM,IAAA,SAAS,EAAC,kBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAApC,CAFF,CADF,CAFJ,CAjCJ,CAdF,CAHF,CADF;AAgED;;AAED,IAAMK,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD;AAAA,SAAY;AAClCjC,IAAAA,aAAa,EAAEiC,KAAK,CAACrD,QAAN,CAAeoB,aADI;AAElCJ,IAAAA,UAAU,EAAEqC,KAAK,CAAC1C,OAAN,CAAcK;AAFQ,GAAZ;AAAA,CAAxB;;AAKA,eAAevC,OAAO,CAClB2E,eADkB,8DAEdvE,QAAQ,CAACD,OAFK,GAEOE,YAAY,CAACF,OAFpB,GAEgCG,WAAW,CAACH,OAF5C,GAEwDI,YAAY,CAACJ,OAFrE,EAAP,CAGbQ,aAHa,CAAf","sourcesContent":["import React, {useState, useEffect} from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport clsx from 'clsx';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport * as actions from '../../../../app/actions';\r\nimport * as authDuck from '../../../../app/store/ducks/auth.duck';\r\nimport * as activityDuck from '../../../../app/store/ducks/activity.duck';\r\nimport * as historyDuck from '../../../../app/store/ducks/history.duck';\r\nimport * as categoryDuck from '../../../../app/store/ducks/category.duck';\r\n\r\nimport {storage} from './../../../../app/firebase';\r\nimport default_img from './../../../assets/default_profile.png';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction HistoryDetail(props) {\r\n  const [status, setStatus] = useState('');\r\n  const [id, setId] = useState('');\r\n  const [title, setTitle] = useState('');\r\n  const [min, setMin] = useState(10);\r\n  const [max, setMax] = useState(100);\r\n  const [category, setCategory] = useState('');\r\n  const [summary, setSummary] = useState('');\r\n  const [categoryarr, setCategoryarr]=useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [loadingButtonStyle, setLoadingButtonStyle] = useState({\r\n    paddingRight: \"2.5rem\"\r\n  });\r\n  const history = useHistory();\r\n   const enableLoading = () => {\r\n    setLoading(true);\r\n    setLoadingButtonStyle({ paddingRight: \"3.5rem\" });\r\n  };\r\n\r\n  const disableLoading = () => {\r\n    setLoading(false);\r\n    setLoadingButtonStyle({ paddingRight: \"2.5rem\" });\r\n  };\r\n  useEffect(() => {\r\n    console.log('props.cursur')\r\n    console.log(props.curhistory)\r\n    setId(props.curhistory._id || '');\r\n    setTitle(props.curhistory.title || '')\r\n    setMin(props.curhistory.minBudget || 1);\r\n    setMax(props.curhistory.maxBudget || 10);\r\n    setSummary(props.curhistory.summary || '');\r\n    setCategoryarr(props.allcategories);\r\n    if(props.curhistory.category)\r\n      setCategory(props.curhistory.category || '');\r\n    else\r\n      setCategory(props.allcategories[0]._id);\r\n  }, [props])\r\n\r\n\r\n  // const cancel = () => {\r\n    \r\n    // setPassword(getPassword(props.user.password));\r\n  // }\r\n\r\n  const save = () => {\r\n     if(title === '' || summary === ''){\r\n      setStatus('You have to input all the correctly info')\r\n      return;\r\n    }\r\n    if(id=== ''){\r\n      setStatus('You have to input all the correctly info')\r\n      return;\r\n    }\r\n    var tempData = {\r\n      title: title,\r\n      minBudget:min,\r\n      maxBudget:max,\r\n      summary:summary,\r\n    };\r\n    if(id != '')\r\n      Object.assign(tempData, {'_id':id});\r\n      handleSave(tempData)\r\n  }\r\n  const handleSave=(result)=>{\r\n\r\n     enableLoading();\r\n    setTimeout(() => {\r\n       if(id === ''){\r\n      actions.addHistory(result).then(res=>{\r\n        disableLoading();\r\n        let {data} = res;\r\n        if(!data.success){\r\n          setStatus(data.errMessage);\r\n          return;\r\n        }else{\r\n          setStatus('');\r\n          console.log('succesfull')\r\n          props.allHistorys(data.historys);\r\n          history.push(\"/admin/history\");\r\n          return;\r\n        }\r\n      }).catch(() => {\r\n        //console.log('===  data2  == ')\r\n        disableLoading();\r\n        setStatus(\r\n          'Error!!! you have to check your Database or Connection'\r\n        );\r\n      });\r\n    }else{\r\n      actions.updateHistory(result).then(res=>{\r\n        disableLoading();\r\n        let {data} = res;\r\n        if(!data.success){\r\n          setStatus(data.errMessage);\r\n          return;\r\n        }else{\r\n          console.log('succesfull')\r\n          props.allHistorys(data.historys);\r\n          history.push(\"/admin/history\");\r\n          return;\r\n        }\r\n      }).catch(() => {\r\n        //console.log('===  data2  == ')\r\n        disableLoading();\r\n        setStatus(\r\n          'Error!!! you have to check your Database or Connection'\r\n        );\r\n      });\r\n    }\r\n    }, 1000);\r\n\r\n   \r\n  }\r\n\r\n  return (\r\n    <div className=\"row\" style={{backgroundColor: \"white\", padding: \"40px 20px 40px 20px\"}}>\r\n      <div className=\"col-md-2\">\r\n      </div>\r\n      <div className=\"col-md-8\">\r\n        <div className=\"col-md-12\">\r\n          <span className=\"col-md-6 cold-sm-12\" style={{fontSize: \"1.275rem\", fontWeight: 600 }}>{id===''?'New':'Edit'} History</span>\r\n          <div className=\"col-md-6 col-sm-12 pull-right\">\r\n            <Link to=\"/admin/history\"><button className=\"btn btn-secondary pull-right\">Cancel</button></Link>\r\n            <button className=\"\" style={{marginRight: 10, }} onClick={save}className={`btn btn-primary pull-right ${clsx(\r\n                      {\r\n                        \"kt-spinner kt-spinner--right kt-spinner--md kt-spinner--light\": loading\r\n                      }\r\n                    )}`}>\r\n                      {id===''?'Add':'Update'}\r\n              </button>\r\n          </div>\r\n        </div>\r\n        <div className=\"col-md-12\" style={{marginTop: 60}}>\r\n          <div className=\"form-group row\">\r\n            <label className=\"col-xl-3 col-lg-3 col-form-label\">History Title</label>\r\n            <div className=\"col-lg-9 col-xl-6\">\r\n              <input className=\"form-control\" type=\"text\" value={title} onChange={ (e) => setTitle(e.target.value) }/>\r\n            </div>\r\n          </div>\r\n          <div className=\"form-group row\">\r\n              <label className=\"col-xl-3 col-lg-3 col-form-label\">Category</label>\r\n              <div className=\"col-lg-9 col-xl-6\">\r\n                {/* <select className=\"form-control\" id=\"exampleSelectl\" value={category} onChange={ (e) => setCategory(e.target.value) } multiple={true}> */}\r\n                <select className=\"form-control\" id=\"exampleSelectl\" value={category} onChange={ (e) => setCategory(e.target.value) }>\r\n                  {categoryarr.map((row,index) => (\r\n                    <option key={row._id} value={row._id}>{row.name}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group row\">\r\n              <label className=\"col-xl-3 col-lg-3 col-form-label\">History Summary</label>\r\n              <div className=\"col-lg-9 col-xl-6\">\r\n                <textarea className=\"form-control\"  rows=\"4\"value={summary} onChange={ (e) => setSummary(e.target.value) }></textarea>\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group  row\">\r\n                <label className=\"col-xl-3 col-lg-3 col-form-label\">Min Budget</label>\r\n                <div className=\"col-lg-9 col-xl-6\">\r\n                  <div className=\"input-group\">\r\n                    <input type=\"number\" className=\"form-control\" min=\"1\" value={min} onChange={ (e) => setMin(e.target.value) }/>\r\n                    <div className=\"input-group-append\"><span className=\"input-group-text\">$</span></div>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"form-group  row\">\r\n                <label className=\"col-xl-3 col-lg-3 col-form-label\">Max Budget</label>\r\n                <div className=\"col-lg-9 col-xl-6\">\r\n                  <div className=\"input-group\">\r\n                    <input type=\"number\" className=\"form-control\" min=\"10\" value={max} onChange={ (e) => setMax(e.target.value) }/>\r\n                    <div className=\"input-group-append\"><span className=\"input-group-text\">$</span></div>\r\n                  </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n  allcategories: state.category.allcategories,\r\n  curhistory: state.history.curhistory,\r\n})\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {...authDuck.actions, ...activityDuck.actions, ...historyDuck.actions, ...categoryDuck.actions}\r\n)(HistoryDetail);\r\n"]},"metadata":{},"sourceType":"module"}